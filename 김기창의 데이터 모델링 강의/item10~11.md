# TIL (2025.08.27)

오늘 읽은 범위: 10강 - 하산하는 과정. 비정규화 ~ 11강 - 정답 같은 모델을 향해. 모델링 방법론과 리모델링

---

```text
책의 내용을 요약해보기
```
# 10강 - 하산하는 과정. 비정규화
역정규화나 반정규화란 용어를 사용해도 좋지만, 비정규화는 정규화를 거꾸로 적용하는 과정이상의 의미가 내포

### 비정규화
- 역정규화보다 포괄적인 내용
- 정규형이 아닌 모델을 만드는 과정

## 비정규화와 성능
성능은
- 조회 성능 (select)
  - 소량 데이터에 대한 조회 성능: 인덱스
  - 대량 데이터에 대한 조회 성능: 스캔 방법, 조인 방법
- 쓰기 성능 (insert, update, delete)

```
RDB는 데이터 성격을 반영해서, 엔터티를 분해하고,
분해된 엔터티 간의 조인을 통해서 데이터를 조회
하는것이 핵심
```
ㄴ 서로 물리적인 장소에 존재하게 되서, 조인을 하면 조회 성능이 떨어짐

성능도 중요하지만, 데이터 무결성이 제일 중요

## 비정규화하기 전에 정규화가 우선
정규화 수행 과정
1. 정규화 적용
2. 성능 이슈가 있는가?
3. 있다면 다른 방안이 있는가?
4. 있다면 비정규화 하지 않음.
5. 3의 다른 방안이 없다면, 비정규화 수행
6. 비정규화된 데이터 정합성 방안 마련

## 성능 문제가 있어야 비정규화 고려
OTLP 성격의 시스템에서도, 데이터 무결성을 저해하면서까지 성능을 고려해야 할만한 요건은 흔치 않음.  

3번의 방안들
- 파티션
- 클러스터링
- IOT(index organized table) 같은 특수 형태의 테이블
- hint || view

6번의 방안들
- tool 사용
- 중복된 속성과, 엔터티의 원천 데이터가 어디인지 명확하게 하기

## 비정규화의 단점
### - 데이터의 정합성이 깨진다.
### - 데이터의 성격이 불명확해진다.
### - 모델의 확장성 측면에서도 불리하다.
### - 개발이 어렵다.
### - 저장 공간의 낭비가 있다.

## 역정규화, 비정규화의 일부
비정규화 구분  
ㄴ 역정규화 - 중복 데이터 사용   
ㄴ 중복 데이터를 사용하지 않는 방법

### 역정규화
- 하위 엔터티를 기준으로 역정규화: 하향 역정규화
- 상위 엔터티를 기준으로 역정규화: 상향 역정규화
ㄴ 주문과 주문상품 예시에서, 상향 역정규화는 주문 상품이 컬럼으로 들어가기 때문에, 최대 개수가 정해져 있어야 사용가능

## 중복 속성을 사용한 비정규화
역정규형 모델은 매우 바람직하지 않으니, 중복 속성을 사용한 비정규화가 더 나은 대안임.

## 추출 속성을 사용한 비정규화
중복 속성과 유사한 속성인 추출 속성은, 이미 존재하는 다른 속성에서 값을 계산해서 별도로 저장해 놓은 속성  
ㄴ 데이터 검증이 매우 어려움

## 중복 데이터가 아닌 엔터티 합체와 분해
엔터티 분해는 비정규화는 아님. -> 너무 많은 속성으로 인해, 성능 문제가 생길 시, 별도의 데이터 같은 속성을 별도의 엔터티로 분리

합체는 분해의 역순!!

## 그 밖의 다양한 비정규화 방법
- 요약 엔터티: 미리 계산한 데이터를 저장해 놓은 엔터티
- 추출 엔터티: 일부 데이터만 추출해서 별도로 관리하는 비정규형 엔터티
- 변경 이력 데이터에 대한 조회 성능 문제 때문에 중복 데이터 사용
- 동일한 엔터티를 여러 개 복사해서 사용


# 11강 - 정답 같은 모델을 향해. 모델링 방법론과 리모델링
## 그려나가는 하향식 방법
기존 테이블이 없는 상태에서 모델링을 하는 방법 <> 기존 테이블이 있는 상태에서 모델링을 하는 방법: 상향식 방법
### 하향식 방법은 화면 설계서가 중요

## 모델링에 답이 어딨어?
상향식 방법을 사용할 때는, 함수 종속을 기반으로 설계하면 정답이 된다...
ㄴ 데이터 이행도 고려  
ㄴ 개발 일정도 고려  

## 삭제해 나가는 상향식 방법
상향식 모델링 방법: 삭제하면서 설계하는 방법  
모델을 설계시 삭제 ->통합과 정규화

하향식도 통합의 개념이 존재.

상향식으로 설계 시, 삭제 대상
- 모든 중복 속성 제거
- 제자리가 아닌 엔터티에 위치하는 속성 제거

#### 기존 모델이 있어도, 대폭 수정이 돼서 다시 설계하는 경우는 하향식 방법을 채택하는 것이 좋음

상향식 방법을 사용하는 가장 큰 이유: 기존 데이터를 지속해서 사용해야 되기 때문

```
하향식 방법은 개념 모델을 설계하고 나서, 그 개념 모델을 상세화 / 상위 개념의 데이터인 엔터티를 도출
상향식 방법은 이미 존재하는 모델 구조를 기반으로 모델을 정리 / 하위 개념의 데이터인 속성을 분석
```

## 리모델링이란?
데이터만 그대로 사용할 뿐, 모델 구조를 바꾸는 것

모델링 하는 방법
1. as-is 모델 확보
2. as-is 모델 분석 with 개선 모델링
3. to-be 요구 사항 분석 with 신규 모델링
4. to-be 데이터 모델링
5. 각종 검증 방법을 동원하여, 모델의 품질 높이기

1번에서 확보를 하지 못했을 때, db를 기준으로 as-is 모델을 새로 만드는 것: 리버스 모델링
ㄴ 리버스 엔지니어링  
ㄴ 엔터티 목록과 속성 목록을 사용해서 ERD 생성  

2번은 개선 모델링
3번은 신규 모델링
5번은 보완 모델링

### 개선 모델링
1. 핵심 엔터티 선정해야 함
2. 그 핵심 엔터티를 기준으로 주요 엔터티를 설계 후, 하위 엔터티 설계
3. 엔터티 통합 작업
4. 필요 시, 모델 구조 변경

개선 모델링의 절차  
as-is 중요 엔터티
1. 역공학 수행 & 현행 ERD 생성
2. 중요 엔터티 선별
개념 모델(중요 엔터티)
3. 엔터티 명 분석 & 업무 식별자 분석
4. 관계 속성 분석 & 주변 엔터티 도출
5. 일반 속성 분석 & 중복, 추출 속성 구분
6. 개념 모델 구축 & 개념 모델 리뷰
논리 모델(전체 엔터티)
7. 엔터티 명 분석 & 업무 식별자 분석
8. 관계 속성 분석 & 주변 엔터티 도출
9. 일반 속성 분석 & 중복, 추출 속성 구분
10. 논리 모델 구축 & 논리 모델 리뷰

## 신규 업무 모델링
as-is 모델에 대한 뼈대 구조 설계 완성 후, to-be 요구사항 반영
주의! as-is 주요 엔터티 구조를 개선한 to-be 개념 모델 확정 전까지는, to-be 요건 반영 불가.
to-be요건이라함은
- 업무 적인 요건
- 데이터 적인 요건: 엔터티 통합, 식별자 변경 등

## 모델을 검증하는 보완 모델링
tool를 사용하여, 모델 검증

```text
🤔 오늘 읽은 소감은? 떠오르는 생각을 가볍게 적어보세요
```
역정규화와 비정규화의 구분이 중요

```text
💡 궁금한 내용이 있거나, 잘 이해되지 않는 내용이 있다면 적어보세요.
```