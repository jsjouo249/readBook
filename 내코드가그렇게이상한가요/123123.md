# item14. 리팩토링: 기존의 코드를 성장시키는 기술
## 리팩토링의 흐름

리팩토링이란 실질적인 동작은 유지하면서, 구조만 정리하는 작업

- 중첩을 제거하여 보기 좋게 만들기
- 의미 단위로 로직 정리하기
- 조건을 읽기 쉽게 하기
- 무턱대고 작성한 로직을 목적을 나타내는 메소드로 바꾸기
## 단위 테스트로 리팩토링 중 실수 방지하기
가장 확실하게 실수를 줄일 수 있는 방법: 단위 테스트

- 코드 과제 정리하기
- 테스트 코드를 사용한 리팩토링 흐름
  - 이상적인 구조의 클래스 기본 형태를 어느정도 잡기.
  - 기본 형태를 기반으로 테스트 코드 작성
  - 테스트 실패 시키기
  - 테스트를 성공시키기 위한 최소한의 코드 작성
  - 클래스 내부에서 리팩토링 대상 코드 호출
  - 테스트 성공할 수 있도록, 조금씩 로직을 이상적인 구조로 리팩토링
## 불확실한 사양을 이해하기 위한 분석 방법
- 문서화 테스트
- 스크래치 리팩토링
## IDE의 리팩토링 기능
- 이름 변경
## 리팩토링 시 주의 사항
- 기능 추가와 리팩토링 동시에 하지 않기
- 작은 단계로 실시하기
- 불필요한 사양은 제거 고려하기

# item15. 설계의 의의와 설계를 대하는 방법
## 이 책은 어떤 설계를 주제로 집필한 것인가?
- 유지 보수성
  - 부가적인 특성: 모듈성, 재사용성, 분석성, 수정성, 시험성
## 설계하지 않으면 개발 생산성이 저하된다.
- 요인 1: 버그가 발생하기 쉬운 구조
- 요인 2: 가독성이 낮은 구조
- 나무꾼의 딜레마
- 열심히 일했지만 생산성이 나쁨
- 국가 규모의 경제 손실
## 소프트웨어와 엔지니어의 성장 가능성
- 엔지니어에게 자산이란 무엇인가?
- 레거시 코드는 발전을 막음
- 레거시 코드는 고품질 설계 경험을 막음
- 레거시 코드는 시간을 낭비하게 만듦
## 문제 해결하기
- 문제를 인식하지 못하면 설계에 대한 생각 자체가 떠오르지 않음
- 인지하기 쉬운 문제와 인지하기 어려운 문제가 있음
- 이상적인 형태를 알아야 문제를 인식할 수 있음
- 변경 용이성을 비교할 수 없는 딜레마
## 코드의 좋고 나쁨을 판단하는 지표
- 실행되는 코드의 줄 수
- 순환 복잡도
- 응집도
- 결합도
- 청크
## 코드 분석을 지원하는 다양한 도구
- Code Climate Quality
- Understand 
- Visual Studio
## 설계 대상과 비용 대비 효과
- 파레토의 법칙(80:20의 법칙)
- 코어 도메인: 서비스의 중심 영역
- 중점 설계 대상 선정에는 비즈니스 지식이 필요함
## 시간을 다스리는 능력자 되기

# item16. 설계를 방해하는 개발 프로세스와의 싸움
## 커뮤니케이션
- 커뮤니케이션이 부족하면 설계 품질에 문제가 발생
- 콘웨이 법칙 - 시스템의 구조는 그것을 설계하는 조직의 구조를 닮아 간다. / 역콘웨이 법칙 - 소프트웨어의 구조를 먼저 설계하고, 이후 소프트웨어의 구조에 맞게 조직을 편성한다.
- 심리적 안정성
## 설계
- '빨리 끝내고 싶다' 라는 심리가 품질 저하의 함정
- 나쁜 코드를 작성하는 것이 좋은 코드를 작성하는 것 보다 오래 걸린다.
- 클래스 설계와 구현 피드백 사이클 돌리기
- 한 번에 완벽하게 설계하려고 들지 말고, 사이클을 돌리며 완성하기
- '성능이 떨어질 수 있으니 클래스를 작게 나누니 말자'는 맞는 말일까?? - 너무 빠른 최적화
- 설계 규칙을 다수결로 결정하면 코드 품질은 떨어진다
- 설계 구칙을 정할 때 중요한 점 - 설계 역량이 뛰어난 팀원이 중심이 되어 규칙 생성
  - 설계 규칙은 성능이나 프레임워크의 제약 등 다양한 요건과 트레이드 오프 될 가능성이 있다.
  - 규칙을 무조건 지켜야 하는 것은 아니며, 타협점을 찾아야 하는 상황도 분명 존재
## 구현
- 깨진 유리창 이론과 보이스카우트 규칙
- 기존의 코드를 믿지 말고, 냉정하게 파악하기
  - 앵커링 효과 - 처음 제시한 수치와 정보가 기준이 되어, 이후의 판단을 왜곡하는 인지 편향
  - 이름이 없거나, 이름을 모르는 것은 인지하기 어렵다.
- 코딩 규칙 사용하기
- 명명 규칙
- 모델을 다시 확인하는 방법
## 리뷰
- 코드 리뷰 구조화 하기
- 코드를 설계 시점에 리뷰하기
- 존중과 예의
- 정기적으로 개선 작업 진행하기
## 팀의 설계 능력 높이기
- 영향력을 갖는 규모까지 동료 모으기
- 천리길도 한 걸음부터
- 백문이 불여일견
- 팔로우업 스터디 진행하기
- 스터디 그룹에서 발생할 수 있는 문제 해결 노하우
- 리더와 매니저에게 설계의 중요성과 비용 대비 효과 설명하기
- 설계 책임자 세우기
- 
